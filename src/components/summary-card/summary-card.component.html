 <div class="flex flex-col gap-2">
      <p class="tracking-wide">{{ title() }}</p>

      @if (stats().thisWeek; as thisWeek) {
      <div class="border-t-2 border-slate-900/50 p-2">
        <h3
          class="font-bold text-base mb-4 text-emerald-300 flex items-center gap-2"
        >
          <span>üìä</span>
          <span>Desempenho da Semana</span>
        </h3>
        <div class="space-y-4 text-sm">
          <div class="flex justify-between items-center">
            <span class="font-semibold text-gray-300 flex items-center gap-2"
              >üèãÔ∏è Treinos</span
            >
            <div class="flex items-center gap-2">
              <span class="font-bold text-lg text-white">{{
                thisWeek.totalWorkouts
              }}</span>
              @let change = getPercentageChange(thisWeek.totalWorkouts, stats().lastWeek?.totalWorkouts);
              <div
                class="text-xs font-bold w-16 text-center rounded-full px-1 py-0.5"
                
                [class.bg-green-500]="change !== null && change > 0"
                [class.text-green-400]="change !== null && change > 0"
                [class.bg-red-500]="change !== null && change < 0"
                [class.text-red-400]="change !== null && change < 0"
                [class.bg-gray-600]="change !== null && change === 0"
                [class.text-gray-400]="change !== null && change === 0"
                [class.bg-blue-500]="change === Infinity"
                [class.text-blue-400]="change === Infinity"
                [class.bg-gray-700/50]="change === null"
                [class.text-gray-500]="change === null"
              >
                @if (change === null) {
                <span>-</span>
                } @else if (change === Infinity) {
                <span>Novo!</span>
                } @else if (change !== 0) {
                <span>
                  @if (change > 0) { ‚ñ≤ } @else { ‚ñº } {{ change | number : "1.0-0"
                  }}%
                </span>
                } @else {
                <span>--</span>
                }
              </div>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <span class="font-semibold text-gray-300 flex items-center gap-2"
              >‚è±Ô∏è Dura√ß√£o</span
            >
            <div class="flex items-center gap-2">
              <span class="font-bold text-lg text-white"
                >{{ thisWeek.totalDuration }}
                <span class="text-sm font-normal">min</span></span
              >
              @let change = getPercentageChange(thisWeek.totalDuration, stats().lastWeek?.totalDuration);
              <div
                class="text-xs font-bold w-16 text-center rounded-full px-1 py-0.5"
                [class.bg-green-500]="change !== null && change > 0"
                [class.text-green-400]="change !== null && change > 0"
                [class.bg-red-500]="change !== null && change < 0"
                [class.text-red-400]="change !== null && change < 0"
                [class.bg-gray-600]="change !== null && change === 0"
                [class.text-gray-400]="change !== null && change === 0"
                [class.bg-blue-500]="change === Infinity"
                [class.text-blue-400]="change === Infinity"
                [class.bg-gray-700]="change === null"
                [class.text-gray-500]="change === null"
              >
                @if (change === null) {
                <span>-</span>
                } @else if (change === Infinity) {
                <span>Novo!</span>
                } @else if (change !== 0) {
                <span>
                  @if (change > 0) { ‚ñ≤ } @else { ‚ñº } {{ change | number : "1.0-0"
                  }}%
                </span>
                } @else {
                <span>--</span>
                }
              </div>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <span class="font-semibold text-gray-300 flex items-center gap-2"
              >üî• Calorias</span
            >
            <div class="flex items-center gap-2">
              <span class="font-bold text-lg text-emerald-400"
                >~{{ thisWeek.totalCalories | number : "1.0-0" }}</span
              >
              @let change = getPercentageChange(thisWeek.totalCalories, stats().lastWeek?.totalCalories);
              <div
                class="text-xs font-bold w-16 text-center rounded-full px-1 py-0.5"
                [class.bg-green-500]="change !== null && change > 0"
                [class.text-green-400]="change !== null && change > 0"
                [class.bg-red-500]="change !== null && change < 0"
                [class.text-red-400]="change !== null && change < 0"
                [class.bg-gray-600]="change !== null && change === 0"
                [class.text-gray-400]="change !== null && change === 0"
                [class.bg-blue-500]="change === Infinity"
                [class.text-blue-400]="change === Infinity"
                [class.bg-gray-700]="change === null"
                [class.text-gray-500]="change === null"
              >
                @if (change === null) {
                <span>-</span>
                } @else if (change === Infinity) {
                <span>Novo!</span>
                } @else if (change !== 0) {
                <span>
                  @if (change > 0) { ‚ñ≤ } @else { ‚ñº } {{ change | number : "1.0-0"
                  }}%
                </span>
                } @else {
                <span>--</span>
                }
              </div>
            </div>
          </div>

          @if(thisWeek.totalVolume > 0) {
          <div class="flex justify-between items-center">
            <span class="font-semibold text-gray-300 flex items-center gap-2"
              >‚öñÔ∏è Volume</span
            >
            <div class="flex items-center gap-2">
              <span class="font-bold text-lg text-white"
                >{{ formatKilo(thisWeek.totalVolume) }}
                <span class="text-sm font-normal">kg</span></span
              >
              @let change = getPercentageChange(thisWeek.totalVolume, stats().lastWeek?.totalVolume);
              <div
                class="text-xs font-bold w-16 text-center rounded-full px-1 py-0.5"
                [class.bg-green-500]="change !== null && change > 0"
                [class.text-green-400]="change !== null && change > 0"
                [class.bg-red-500]="change !== null && change < 0"
                [class.text-red-400]="change !== null && change < 0"
                [class.bg-gray-600]="change !== null && change === 0"
                [class.text-gray-400]="change !== null && change === 0"
                [class.bg-blue-500]="change === Infinity"
                [class.text-blue-400]="change === Infinity"
                [class.bg-gray-700]="change === null"
                [class.text-gray-500]="change === null"
              >
                @if (change === null) {
                <span>-</span>
                } @else if (change === Infinity) {
                <span>Novo!</span>
                } @else if (change !== 0) {
                <span>
                  @if (change > 0) { ‚ñ≤ } @else { ‚ñº } {{ change | number : "1.0-0"
                  }}%
                </span>
                } @else {
                <span>--</span>
                }
              </div>
            </div>
          </div>
          }
        </div>
      </div>
      }

      @if (stats().consistency; as consistency) {
      <div class="border-t-2 border-slate-900/50 p-2">
        <h3
          class="font-bold text-base mb-3 text-cyan-300 flex items-center gap-2"
        >
          <span>üóìÔ∏è</span>
          <span>Consist√™ncia (√öltimos 7 dias)</span>
        </h3>
        <div class="flex justify-center items-center gap-2 py-2">
          @for (day of [1,2,3,4,5,6,7]; track day) {
          <div
            class="w-5 h-5 rounded-full"
            [class.bg-cyan-400]="day <= consistency.daysInLast7"
            [class.bg-gray-700]="day > consistency.daysInLast7"
          ></div>
          }
        </div>
        <p class="text-center text-xs text-gray-400 mt-1">
          {{ consistency.daysInLast7 }} de 7 dias com treino.
        </p>
      </div>
      }

      <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
        <div
          class="bg-slate-900/50 backdrop-blur-sm p-2 rounded-md flex flex-col items-center justify-center"
        >
          <div class="text-3xl mb-1">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
          <h4
            class="text-xs text-slate-400 font-bold uppercase tracking-wider text-center"
          >
            Treinos
          </h4>
          <p class="text-xl font-bold">{{ stats().overall.totalWorkouts }}</p>
        </div>
        <div
          class="bg-slate-900/50 backdrop-blur-sm p-2 rounded-md flex flex-col items-center justify-center"
        >
          <div class="text-3xl mb-1">üî•</div>
          <h4
            class="text-xs text-slate-400 font-bold uppercase tracking-wider text-center"
          >
            Calorias
          </h4>
          <p class="text-xl font-bold text-emerald-400">
            ~{{ formatKilo(stats().overall.totalCalories) }}
          </p>
        </div>
        <div
          class="bg-slate-900/50 backdrop-blur-sm p-2 rounded-md flex flex-col items-center justify-center"
        >
          <div class="text-3xl mb-1">‚è±Ô∏è</div>
          <h4
            class="text-xs text-slate-400 font-bold uppercase tracking-wider text-center"
          >
            Tempo
          </h4>
          <p class="text-xl font-bold">
            {{ (stats().overall.totalDuration / 60) | number : "1.0-1"
            }}<span class="text-base font-normal">h</span>
          </p>
        </div>
        @if (stats().overall.totalVolume > 0) {
        <div
          class="bg-slate-900/50 backdrop-blur-sm p-2 rounded-md flex flex-col items-center justify-center"
        >
          <div class="text-3xl mb-1">üí™</div>
          <h4
            class="text-xs text-slate-400 font-bold uppercase tracking-wider text-center"
          >
            Volume
          </h4>
          <p class="text-xl font-bold">
            {{ formatKilo(stats().overall.totalVolume)
            }}<span class="text-base font-normal">kg</span>
          </p>
        </div>
        } @if (stats().overall.totalDistance > 0) {
        <div
          class="bg-slate-900/50 backdrop-blur-sm p-2 rounded-md flex flex-col items-center justify-center"
        >
          <div class="text-3xl mb-1">üèÉ‚Äç‚ôÇÔ∏è</div>
          <h4
            class="text-xs text-slate-400 font-bold uppercase tracking-wider text-center"
          >
            Dist√¢ncia
          </h4>
          <p class="text-xl font-bold">
            {{ stats().overall.totalDistance | number : "1.1-1"
            }}<span class="text-base font-normal">km</span>
          </p>
        </div>
        }
      </div>

      <div class="border-t-2 border-slate-900/50 p-2">
        <h3
          class="font-bold text-base mb-4 text-amber-300 flex items-center gap-2"
        >
          <span>üéØ</span>
          <span>Distribui√ß√£o de Foco (Total)</span>
        </h3>

        @let dist = stats().typeDistribution;
        <div class="space-y-3 text-sm">
          @if(dist.musculacao) {
          <div>
            <div class="flex justify-between mb-1 text-xs font-semibold">
              <span class="text-gray-300">üí™ Muscula√ß√£o</span>
              <span class="text-gray-400"
                >{{ dist.musculacao }} treinos</span
              >
            </div>
            <div class="w-full bg-slate-900 h-4 p-0.5 rounded-sm">
              <div
                class="bg-emerald-600 h-full rounded-sm"
                [style.width]="getDistributionPercentage('musculacao') + '%'"
              ></div>
            </div>
          </div>
          } @if(dist.cardio) {
          <div>
            <div class="flex justify-between mb-1 text-xs font-semibold">
              <span class="text-gray-300">üèÉ Cardio</span>
              <span class="text-gray-400">{{ dist.cardio }} treinos</span>
            </div>
            <div class="w-full bg-slate-900 h-4 p-0.5 rounded-sm">
              <div
                class="bg-sky-500 h-full rounded-sm"
                [style.width]="getDistributionPercentage('cardio') + '%'"
              ></div>
            </div>
          </div>
          } @if(dist.isometrico) {
          <div>
            <div class="flex justify-between mb-1 text-xs font-semibold">
              <span class="text-gray-300">üßò Isom√©trico</span>
              <span class="text-gray-400"
                >{{ dist.isometrico }} treinos</span
              >
            </div>
            <div class="w-full bg-slate-900 h-4 p-0.5 rounded-sm">
              <div
                class="bg-amber-500 h-full rounded-sm"
                [style.width]="getDistributionPercentage('isometrico') + '%'"
              ></div>
            </div>
          </div>
          } @if (totalDistributionWorkouts() === 0) {
          <p class="text-center text-xs text-gray-500 italic">
            Nenhum treino registrado para mostrar a distribui√ß√£o.
          </p>
          }
        </div>
      </div>
    </div>